apiVersion: tekton.dev/v1
kind: Pipeline
metadata:
  creationTimestamp: "2023-08-09T20:25:27Z"
  generation: 1
  name: cs-api-servicos-online
  namespace: poc-sonda-utilities
  resourceVersion: "13675106"
  uid: 743bafdb-c938-472c-86c6-4847a607f30b
spec:
  params:
  - name: SOURCE_IMAGE
    type: string
  - default: "false"
    name: SOURCE_TLS_VERIFY
    type: string
  - name: DESTINATION_IMAGE
    type: string
  - default: "false"
    name: DESTINATION_TLS_VERIFY
    type: string
  - default: oc rollout latest dc/cs-api-servicos-online
    name: SCRIPT
    type: string
  tasks:
  - name: copy-image
    params:
    - name: SOURCE_IMAGE
      value: $(params.SOURCE_IMAGE)
    - name: SOURCE_TLS_VERIFY
      value: $(params.SOURCE_TLS_VERIFY)
    - name: DESTINATION_IMAGE
      value: $(params.DESTINATION_IMAGE)
    - name: DESTINATION_TLS_VERIFY
      value: $(params.DESTINATION_TLS_VERIFY)
    taskRef:
      kind: Task
      name: copy-image
  - name: update-deployment
    params:
    - name: SCRIPT
      value: $(params.SCRIPT)
    - name: VERSION
      value: latest
    runAfter:
    - copy-image
    taskRef:
      kind: ClusterTask
      name: openshift-client